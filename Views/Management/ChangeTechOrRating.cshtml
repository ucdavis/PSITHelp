@model ITHelp.Models.WorkOrderEditCreateViewModel

<div>
	<div class="card text-dark bg-light mb-3">
		<div class="card-body">
			@await Html.PartialAsync("_WorkOrderSummary", @Model.workOrder)

		</div>
	</div>
	<form asp-action="ChangeTechOrRating">
		<input type="hidden" asp-for="@Model.workOrder.Id" />
	<div>
		<h3>Update to:</h3>
		<div class="form-group row">
			<label asp-for="workOrder.Technician" class="col-sm-3 col-form-label"></label>
			<div class="col-sm-3">				
					<select asp-for="workOrder.Technician" class="form-select form-select-sm" asp-items="@(new SelectList(Model.technicians, "Id", "LastFirstName"))"></select>	
			</div>
		</div>
		<div class="form-group row">
			<label asp-for="workOrder.Difficulty" class="col-sm-3 col-form-label"></label>
			<div class="col-sm-1">
				<select asp-for="workOrder.Difficulty" class="form-select form-select-sm">
					<option>1</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
					<option>5</option>
					<option>6</option>
					<option>7</option>
					<option>7</option>
					<option>8</option>
					<option>9</option>
					<option>10</option>
					<option>11</option>
					<option>12</option>
					<option>13</option>
					<option>14</option>
					<option>15</option>
					<option>16</option>
					<option>17</option>
					<option>18</option>
					<option>19</option>
				</select>
			</div>
		</div>
		<div class="form-group row">
				<label asp-for="workOrder.TechComments" class="col-sm-3 col-form-label">Comments</label>
				<div class="col-sm-9">
					<input asp-for="workOrder.TechComments" class="form-control" />
				</div>
		</div>
		<div>(Comments added to tech change email & work order)</div>
		<div>
			<input type="submit" class="btn btn-primary" value="Update" /> | 
			<a asp-action="details" asp-controller="Staff" asp-route-id="@Model.workOrder.Id" class="btn btn-dark">Cancel</a>
		</div>
	</div>
	</form>
	<hr />
	@if (Model.workOrder.Actions.Any())
	{
		<div>
			<table class="table">
				<thead>
					<tr>
						<th>Date</th>
						<th>By</th>
						<th>Text</th>
					</tr>
				</thead>
				<tbody>
					@foreach (var action in Model.workOrder.Actions)
					{
						<tr>
							<td>@action.Date.ToString()</td>
							<td>@action.SubmittedEmployee.Name</td>
							<td>@action.Text</td>
						</tr>
					}
				</tbody>
			</table>
		</div>
	}
</div>
